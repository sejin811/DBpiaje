<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBpiaje | ask</title>
     <link rel="icon" href="pepe2.jpeg" type="image/png">
    <!-- CSSíŒŒì¼ ì—°ê²° --> 
   <link rel="stylesheet" href="style2.css">
   <style>
    .banner {
      background-image: url('https://img.freepik.com/fotos-kostenlos/welliger-schwarz-weisser-hintergrund_23-2150530917.jpg?semt=ais_hybrid&w=740');
      background-size: cover;
      background-position: center;
      color: rgb(255, 0, 0);
      text-align: center;
      font-family: Arial, sans-serif;

      /* ê°€ë¡œë¡œ ê¸¸ê³  ì–‡ì€ ë°°ë„ˆ */
      height: 120px; /* ì›í•˜ëŠ” ë†’ì´ë¡œ ì¡°ì ˆ */
      width: 100%;

      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;

      padding: 0;
      margin: 0;
    }

    .banner h1 {
      font-size: 4rem;
      margin: 0;
    }

    .banner p {
      font-size: 1rem;
      margin: 5px 0 0 0;
    }

    /* ëª¨ë°”ì¼ ëŒ€ì‘ */
    @media (max-width: 600px) {
      .banner {
        height: 100px;
      }

      .banner h1 {
        font-size: 7vw;
      }

      .banner p {
        font-size: 0.9rem;
      }
    }
   </style>
</head>
<body>

     <!--ë°°ë„ˆ-->
  <div class="banner">
    <h1>DBpiajeğŸ•“-ë¬¸ì˜ í˜ì´ì§€</h1>
  </div>

  <!--ë©”ë‰´-->
  <aside class="sidebar">
  <h3>ë©”ë‰´</h3>
  <a class="menu-button" href="../index.html">í™ˆ</a>
  <a class="menu-button" href="../paper.html">ë…¼ë¬¸</a>
  <a class="menu-button" href="ask.html">ë¬¸ì˜</a>
  </aside>

<form id="commentForm">
  <input type="text" name="name" placeholder="ì´ë¦„" required>
  <textarea name="comment" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
  <button type="submit">ëŒ“ê¸€ ì‘ì„±</button>
</form>

<div id="commentList"></div>

<script>
  await fetch("http://localhost:3000/comments", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name, comment }),
  });
</script>

<script>
  document.getElementById("commentForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const name = e.target.name.value;
    const comment = e.target.comment.value;

    await fetch("http://localhost:3000/comments", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ name, comment })
    });

    e.target.reset();
    loadComments();
  });

  async function loadComments() {
    const res = await fetch("http://localhost:3000/comments");
    const data = await res.json();
    const list = document.getElementById("commentList");
    list.innerHTML = "";
    data.forEach(c => {
      const div = document.createElement("div");
      div.className = "comment-card";

      const content = document.createElement("div");
      content.innerHTML = `<strong>${c.name}</strong> (${new Date(c.created_at).toLocaleString()}):<br>${c.comment}`;
      
      const delBtn = document.createElement("button");
      delBtn.textContent = "ì‚­ì œ";
      delBtn.className = "delete-button";
      delBtn.onclick = async () => {
        await fetch(`http://localhost:3000/comments/${c.id}`, {
          method: "DELETE"
        });
        loadComments();
      };

      div.appendChild(content);
      div.appendChild(delBtn);
      list.appendChild(div);
    });
  }

  loadComments(); // í˜ì´ì§€ ë¡œë“œ ì‹œ ëŒ“ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
</script>

</body>
</html>